@page "/downloads/borda-count"
@inject IWebHostEnvironment Env

<PageTitle>Download</PageTitle>

<!-- Header -->
<div class="logo-header-div">
    <h1>
        Downloads
    </h1>
    <img src="logo.png" alt="Superior Voting Logo" />
</div>

<div class="listing-div">
    <h3>ZIP Archive</h3>
    <a class="btn-link-main" style="max-width:400px" href="Downloads/BordaCount/BordaCount.zip" download>BordaCount.zip</a>
</div>

<div class="listing-div">
    <h3>Single Files</h3>
    @foreach (var file in files)
    {
        <a class="btn-link-main" style="max-width:400px" href="@file.Item1" download>@file.Item2</a>
    }
</div>
<br>
<br />

@code {
    private List<Tuple<string, string>> files = new();

    protected override void OnInitialized()
    {
        var path = Path.Combine(Env.WebRootPath, "Downloads", "BordaCount");

        if (Directory.Exists(path))
        {
            DirectoryInfo info = new DirectoryInfo(path);
            foreach (FileInfo file in info.GetFiles())
            {
                if (file.Extension != ".dfy")
                {
                    continue;
                }

                var url = $"Downloads/BordaCount/{file.Name}";
                files.Add(new Tuple<string, string>(url, file.Name));
            }
        }
    }
}